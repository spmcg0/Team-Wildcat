
var http = require('http');

var times = 50;

while (times--) {
  var req = http.request({
      port: 3000
    , method: 'POST'
    , headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
  });

  req.on('response', function(res){
    console.log(res.statusCode);
  });

  var n = 500000;
  while (n--) {
    req.write('foo=bar&bar=baz&');
  }

  req.write('foo=bar&bar=baz');

  req.end();
}

var postPair = function (idx, format, callback) {
    
    var req = new XMLHttpRequest();
 
 
    if (format === 'xml') {
      req.open('POST', '/get-pairs/xml');
    }
    else {
      req.open('POST', '/get-pairs/json');
    }
 
    req.setRequestHeader('Content-Type', 'application/json');

    var msg = { index: idx };
 

    req.send(JSON.stringify(msg));
  }
